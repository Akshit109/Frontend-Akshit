<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Interactive Chessboard (Generated with JS)</title>
<style>
  html,body {
    height: 100%;
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f3f6fb;
  }

  .wrapper {
    display: flex;
    gap: 20px;
    align-items: flex-start;
  }

  /* small styling only â€” the grid and cells are mostly styled in JS */
  .info {
    max-width: 220px;
    line-height: 1.5;
  }

  .info h2 {
    margin: 0 0 8px 0;
    font-size: 18px;
  }

  .legend {
    margin-top: 10px;
    display:flex;
    gap:8px;
    flex-wrap:wrap;
  }

  .legend .box {
    display:flex;
    align-items:center;
    gap:8px;
    font-size:13px;
  }

  .square-swatch {
    width:18px;
    height:18px;
    border:1px solid #ccc;
  }

  .coords {
    margin-top: 12px;
    color: #333;
    font-size: 14px;
  }
</style>
</head>
<body>

<div class="wrapper">
  <div id="boardContainer"></div>

  <div class="info">
    <h2>Interactive Chessboard</h2>
    <p>Click a square to place/remove a marker. Hover to preview. Board is generated by JavaScript using loops and styles set dynamically.</p>

    <div class="legend">
      <div class="box"><div class="square-swatch" id="lightSw"></div> light</div>
      <div class="box"><div class="square-swatch" id="darkSw"></div> dark</div>
      <div class="box"><div style="width:18px;height:18px;border-radius:50%;background:#1e66c2;"></div> marker</div>
    </div>

    <div class="coords" id="status">Hover or click a square</div>
  </div>
</div>

<script>
  // create board wrapper
  const container = document.getElementById('boardContainer');

  // set board size responsive: use CSS grid but set properties through JS (as requested)
  const board = document.createElement('div');
  board.id = 'chessboard';
  container.appendChild(board);

  // dynamic style for board (grid + sizing)
  Object.assign(board.style, {
    display: 'grid',
    gridTemplateColumns: 'repeat(8, minmax(40px, 6vmin))',
    gridTemplateRows: 'repeat(8, minmax(40px, 6vmin))',
    gap: '0',
    border: '4px solid #222',
    boxShadow: '0 8px 20px rgba(0,0,0,0.15)',
    width: 'min(64vmin, 520px)',
    height: 'min(64vmin, 520px)',
    boxSizing: 'border-box',
    background: '#fff'
  });

  // colors for squares
  const lightColor = '#f0d9b5';
  const darkColor  = '#b58863';

  // set legend swatches
  document.getElementById('lightSw').style.background = lightColor;
  document.getElementById('darkSw').style.background = darkColor;

  const status = document.getElementById('status');

  // helper to convert 0..7 indices to chess coords (a8 .. h1)
  function coordFromIndex(row, col) {
    const file = String.fromCharCode(97 + col); // 'a' + col
    const rank = 8 - row;
    return file + rank;
  }

  // create 8x8 squares using loops
  for (let row = 0; row < 8; row++) {
    for (let col = 0; col < 8; col++) {
      const sq = document.createElement('div');
      // store coordinates
      sq.dataset.row = row;
      sq.dataset.col = col;
      sq.dataset.coord = coordFromIndex(row, col);

      // choose color
      const isLight = (row + col) % 2 === 0;
      const baseColor = isLight ? lightColor : darkColor;

      // dynamic styles applied via JS
      Object.assign(sq.style, {
        background: baseColor,
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        userSelect: 'none',
        cursor: 'pointer',
        position: 'relative',
        transition: 'transform 120ms ease, box-shadow 120ms ease'
      });

      // small coordinate label in corner (set by JS)
      const label = document.createElement('span');
      label.textContent = sq.dataset.coord;
      Object.assign(label.style, {
        position: 'absolute',
        left: '4px',
        bottom: '4px',
        fontSize: '10px',
        color: isLight ? '#333' : '#111',
        opacity: '0.6'
      });
      sq.appendChild(label);

      // marker element (hidden initially)
      const marker = document.createElement('div');
      Object.assign(marker.style, {
        width: '40%',
        height: '40%',
        borderRadius: '50%',
        background: '#1e66c2',
        boxShadow: '0 2px 6px rgba(0,0,0,0.25)',
        display: 'none',
        pointerEvents: 'none'
      });
      sq.appendChild(marker);

      // events: hover preview and click toggle marker
      sq.addEventListener('mouseenter', () => {
        sq.style.transform = 'translateY(-6px)';
        sq.style.boxShadow = '0 10px 18px rgba(0,0,0,0.2)';
        status.textContent = 'Hover: ' + sq.dataset.coord;
      });

      sq.addEventListener('mouseleave', () => {
        sq.style.transform = '';
        sq.style.boxShadow = '';
        status.textContent = 'Hover or click a square';
      });

      sq.addEventListener('click', (e) => {
        // toggle marker
        if (marker.style.display === 'none') {
          marker.style.display = 'block';
          status.textContent = 'Placed marker at ' + sq.dataset.coord;
        } else {
          marker.style.display = 'none';
          status.textContent = 'Removed marker from ' + sq.dataset.coord;
        }
      });

      // right-click to quickly clear marker (and prevent context menu)
      sq.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        marker.style.display = 'none';
        status.textContent = 'Cleared marker at ' + sq.dataset.coord;
      });

      board.appendChild(sq);
    }
  }

  // Make board keyboard-accessible: arrow keys move a focus highlight
  let focusRow = 0, focusCol = 0;
  const squares = Array.from(board.children);
  function highlight(r, c) {
    squares.forEach(el => el.style.outline = 'none');
    const idx = r * 8 + c;
    const el = squares[idx];
    el.style.outline = '3px solid rgba(30,102,194,0.9)';
    el.style.outlineOffset = '-3px';
    // bring info
    status.textContent = 'Focus: ' + el.dataset.coord + ' (Enter to toggle marker)';
  }
  highlight(focusRow, focusCol);

  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowUp') { focusRow = Math.max(0, focusRow - 1); highlight(focusRow, focusCol); e.preventDefault(); }
    if (e.key === 'ArrowDown') { focusRow = Math.min(7, focusRow + 1); highlight(focusRow, focusCol); e.preventDefault(); }
    if (e.key === 'ArrowLeft') { focusCol = Math.max(0, focusCol - 1); highlight(focusRow, focusCol); e.preventDefault(); }
    if (e.key === 'ArrowRight') { focusCol = Math.min(7, focusCol + 1); highlight(focusRow, focusCol); e.preventDefault(); }
    if (e.key === 'Enter') {
      const idx = focusRow * 8 + focusCol;
      const el = squares[idx];
      const mark = el.querySelector('div');
      if (mark.style.display === 'none') {
        mark.style.display = 'block';
        status.textContent = 'Placed marker at ' + el.dataset.coord;
      } else {
        mark.style.display = 'none';
        status.textContent = 'Removed marker from ' + el.dataset.coord;
      }
    }
  });

  // small responsiveness tweak: if board container shrinks, adjust label visibility
  function adjustLabels() {
    const cellSize = board.getBoundingClientRect().width / 8;
    board.querySelectorAll('span').forEach(lbl => {
      lbl.style.display = (cellSize < 40) ? 'none' : 'block';
    });
  }
  window.addEventListener('resize', adjustLabels);
  adjustLabels();

</script>
</body>
</html>
